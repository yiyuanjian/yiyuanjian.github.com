---
layout: post
title: "安全通信的实现"
description: "ssh 通信 安全 RSA 公钥 私钥"
category: Linux
tags: [linux, encryption, rsa]
---
{% include JB/setup %}

实际生产中，会有各种各样的场景需要进行安全通信。比如说用户登录，比如获取一些敏感信息，比如传递重要密码等。

怎么进行安全通信呢？

大家都知道对通信内容进行加密。加密的算法有很多，分为对称加密和非对称加密。这两种方法从字面上很好理解。对称加密就是加解密用的密码是一致的，而非对称加密加解密用的密码不一样，用公钥加密的信息必须用对应的私钥才能解密。
使用对称加密的难点在于密码是唯一的，所以需要预览这个信息的人都需要知道密码，当密码知道的人多了以后，其实这个密码就没有什么价值了。非对称加密需要信息发布者利用接收方的公钥加密，接收方收到以后使用自己的私钥解密，则样，只要收信息方保护好自己的私钥。整个信息在互联网上还是相对安全的。

大家都知道HTTPS，这是在HTTP的基础上增加了SSL，对传输双方的信息进行了加密。浏览器为了安全内置了很多信任的证书签名机构，但是去这些机构获取签名证书需要一笔不小的费用，对于一般人或者小型公司不对外通信时来说显得不是特别必要。

我们可以通过以下的办法进行安全的通信。
1. 用户UserA创建一个RSA对： KeyA.public and KeyA.private。

2. UserA把keyA.public发布到网络上或者寄给希望收到消息的人。这样其他人就可以通过KeyA.public加密信息给UserA进行安全的单方面通信了。

3. UserB同样创建一个RSA对： KeyB.public and KeyB.private。同样分发出去。这样所有有KeyB.public的人都可以给UserB单方通信了。

4. 有些情况下，UserB不希望接收到其他用户给他发送加密的信息。这种情况下，就需要多做一步，即UserB只希望给UserA发送公钥。这样子UserB只需要用KeyA.public 加密信息给A就可以了。

网络上的大部分C/S加密通讯都是采用的这种方案，为了加解密效率着想，建立好加密通道后，服务端给生成一个对称加密的key，协商好这个key的有效时间，透过加密信道给到客户端。客户端收到key后，保存在本地，然后在协商的时间内都使用这个Key进行加密。这样，使用合适强度的对称key既可以保证信息的安全，又在服务器资源消耗方面取得了平衡。
